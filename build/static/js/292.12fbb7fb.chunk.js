"use strict"; (self.webpackChunkccvq_client = self.webpackChunkccvq_client || []).push([[292], { 99709: function (e, t, n) { n.r(t), n.d(t, { default: function () { return D } }); var r = n(29439), o = n(47313), i = n(31904), a = n(25532), s = n(3201), c = n(66126), l = n.p + "static/media/background.6ebf91bfe9acf6c21ecd.png"; var u = n.p + "static/media/Tree.de76b870ff1922f22f9c3b4d35937bc8.svg", d = n(8047), f = n(1082), m = n(71003); var p = n.p + "static/media/Asset 10.c0e11cd47510cb404ab1cefb491e1541.svg", h = n(46417), v = function (e) { var t = e.showForm, n = e.setShowForm, i = e.updatePlayerOrder, a = (0, o.useContext)(c.u), l = (0, o.useState)(""), u = (0, r.Z)(l, 2), v = u[0], g = u[1], x = (0, o.useState)(""), b = (0, r.Z)(x, 2), w = b[0], S = b[1]; return (0, h.jsx)(o.Fragment, { children: t && (0, h.jsx)("div", { className: "form-name", children: (0, h.jsxs)("form", { className: "form-group", onSubmit: function (e) { e.preventDefault(), n(!0), s.W.emit("ccvq:setName", { role: "client", name: v, position: w }), i(w), a.closeNoti({ reload: !1 }) }, children: [(0, h.jsxs)("div", { style: { marginBottom: "20px" }, children: [(0, h.jsx)("div", { className: "label", children: (0, h.jsx)(d.Z, { type: "text", value: v, onChange: function (e) { g(e.target.value.toUpperCase()) }, title: "Player Name", placeholder: "T\xean ng\u01b0\u1eddi ch\u01a1i", required: !0, variant: "outlined", style: { marginBottom: "50px", width: "75%", borderRadius: 15 }, fullWidth: !0, inputProps: { style: { textAlign: "center" } }, InputProps: { style: { backgroundColor: "white", borderRadius: 15, border: "3px solid #001328" }, startAdornment: (0, h.jsx)(f.Z, { position: "start", children: (0, h.jsx)("img", { alt: "adornment", src: p, style: { height: 40, width: 30 } }) }) } }) }), (0, h.jsx)("div", { className: "label", children: (0, h.jsx)(d.Z, { type: "number", min: "1", max: "4", value: w, onChange: function (e) { S(e.target.value) }, title: "Player Order", placeholder: "Th\u1ee9 t\u1ef1 ng\u01b0\u1eddi ch\u01a1i", required: !0, fullWidth: !0, variant: "outlined", inputProps: { style: { textAlign: "center" } }, InputProps: { style: { border: "3px solid #001328", backgroundColor: "white", borderRadius: 15 }, startAdornment: (0, h.jsx)(f.Z, { position: "start", children: (0, h.jsx)("img", { alt: "adornment", src: p, style: { height: 40, width: 30 } }) }) }, style: { width: "75%", marginBottom: 20 } }) })] }), (0, h.jsx)(m.Z, { type: "submit", value: "Submit", style: { backgroundColor: "#001328", border: "3px solid white", height: "fit-content" }, sx: { fontFamily: "'Sigmar One', cursive", color: "#fff", fontWeight: 400, fontStretch: "normal", fontSize: "30px !important", margin: 0, padding: "0 10px", borderRadius: "15px" }, children: "ready" })] }) }) }) }, g = (0, i.Z)((function (e) { return { scoreboard: { position: "absolute", zIndex: 3, top: 0, left: 0, padding: "10px", display: "grid", gridTemplateColumns: "1fr 1fr 1fr 1fr", width: "100%", height: "150px", userSelect: "none" }, player: { width: "300px", height: "120px", position: "relative", top: "50%", left: "50%", transform: "translate(-50%, -50%)" }, background: { position: "absolute", top: 0, left: 0, width: "100%", height: "100%", zIndex: 1 }, currentHighlight: { position: "absolute", top: "25px", left: "25px", zIndex: 2, width: "34px", height: "auto" }, name: { position: "absolute", top: "82px", left: "99px", zIndex: 2, width: "195px", height: "36px", fontSize: "25px", lineHeight: "36px", fontWeight: "bold", color: "black", textOverflow: "ellipsis", overflow: "hidden", textAlign: "center", whiteSpace: "nowrap" }, score: { position: "absolute", top: "23px", left: "89px", zIndex: 2, width: "205px", height: "48px", fontSize: "40px", lineHeight: "48px", fontWeight: "bold", color: "white", textAlign: "center" } } })), x = function (e) { var t = g(), n = (0, o.useContext)(a.T), r = n.state, i = n.action; return console.log(r.players), (0, o.useEffect)((function () { return s.W.on("client:bell_signal", (function (e) { i.setBellRinger(parseInt(e.order)) })), function () { s.W.off("client:bell_signal") } }), []), (0, o.useEffect)((function () { return s.W.on("ccvq:bellStatus", (function () { i.resetAllBells(!0) })), function () { s.W.off("ccvq:bellStatus") } }), []), (0, h.jsx)("div", { className: t.scoreboard, children: r.players.map((function (n, r) { return (0, h.jsxs)("div", { className: t.player, children: [parseInt(e.order) === n.order ? (0, h.jsx)("img", { className: t.background, alt: n.name, src: "".concat("/controller", "/scoreboard/player0_name.svg") }) : (0, h.jsx)("img", { className: t.background, alt: n.name, src: "".concat("/controller", "/scoreboard/player1_name.svg") }), n.bell && (0, h.jsx)("img", { className: t.currentHighlight, alt: "current", src: "/controller/scoreboard/turn.svg" }), (0, h.jsx)("div", { className: t.name, children: n.name }), (0, h.jsx)("div", { className: t.score, children: n.score })] }, r) })) }) }, b = n(18477), w = n(16414), S = (0, i.Z)((function () { return { container: { position: "fixed", top: "50%", left: "50%", transform: "translate(-50%,-50%)", zIndex: 100 }, timer: { fontFamily: "Teko", fontSize: 300, letterSpacing: "1rem" } } })), y = function () { var e = S(), t = (0, o.useState)(""), n = (0, r.Z)(t, 2), i = n[0], a = (n[1], (0, w.J)({ step: 1e3 }).timer); return (0, h.jsx)("div", { className: e.container, children: !i && (0, h.jsx)("div", { className: e.timer, children: (0, b.hK)(a / 1e3) }) }) }; var j = n.p + "static/media/Cloud.dc37d3695491131b0086aa8884aa4c71.svg"; var N = n.p + "static/media/Cloud2.ac26e55bf579431dd1c327ee74d0c23e.svg", W = (0, i.Z)((function () { return { container: { position: "fixed", bottom: 0, left: "50%", transform: "translate(-50%, 0)", marginBottom: "10vh", width: "50vw", zIndex: 2 }, cloud: { height: "14vh", position: "absolute", top: "5%", right: "-10%", zIndex: 3 }, cloud2: { height: "16vh", position: "absolute", top: 0, left: "-5%", zIndex: 3 } } })), Z = function () { var e = W(), t = (0, o.useState)(""), n = (0, r.Z)(t, 2), i = n[0], a = n[1], c = (0, o.useState)(!0), l = (0, r.Z)(c, 2), u = l[0], f = l[1], m = (0, o.useState)(""), p = (0, r.Z)(m, 2), v = p[0], g = p[1], x = (0, o.useRef)(null); return (0, o.useEffect)((function () { return s.W.on("ccvq:answerBoxStatus", (function (e) { "open" === e.status ? (f(!1), g(""), x.current && (x.current.focus(), x.current.select())) : "block" === e.status && f(!0) })), function () { s.W.off("ccvq:answerBoxStatus") } }), []), (0, h.jsxs)("form", { className: e.container, onSubmit: function (e) { e.preventDefault(), g(i), a("") }, children: [(0, h.jsx)("img", { className: e.cloud, src: j, alt: "cloud" }), (0, h.jsx)(d.Z, { fullWidth: !0, type: "text", value: i, InputProps: { style: { backgroundColor: "#E0E6E8", border: "5px solid #001328", borderRadius: 30, height: 100 } }, inputProps: { style: { textAlign: "center", textTransform: "uppercase", fontSize: 36 } }, onChange: function (e) { a(e.target.value.toUpperCase()) }, placeholder: "Your answer is ".concat(v), disabled: u, inputRef: x }), (0, h.jsx)("img", { className: e.cloud2, src: N, alt: "cloud2" })] }) }; var k = n.p + "static/media/Bell.abb7afd59a8cc5d3ec132f96b0593038.svg"; var q = n.p + "static/media/NoBell.66e3cd2056e901763e839633c6d4e55e.svg", I = (0, i.Z)((function () { return { container: { position: "fixed", right: "5%", top: "50%", transform: "translate(0,-40%)", zIndex: 10, "&:hover": { cursor: "pointer" } }, icon: { height: "40vh" } } })), C = function (e) { var t = e.start, n = e.playerOrder, i = I(), a = (0, o.useState)(!1), c = (0, r.Z)(a, 2), l = c[0], u = c[1]; return (0, o.useEffect)((function () { return s.W.on("ccvq:bellStatus", (function (e) { "open" === e.status ? u(!0) : "block" === e.status && u(!1) })), function () { s.W.off("ccvq:bellStatus") } }), []), (0, h.jsx)("div", { className: i.container, tabIndex: 0, onClick: function () { var e = t ? new Date - t : null; u(!1), s.W.emit("client:talk", { receivers: ["client", "controller", "mc", "viewer", "livestream"], eventName: "client:bell_signal", data: { order: parseInt(n), time: e / 1e3 } }) }, children: l ? (0, h.jsx)("img", { alt: "bell", src: k, className: i.icon }) : (0, h.jsx)("img", { alt: "bell", src: q, className: i.icon }) }) }, T = n(70095), z = (0, i.Z)((function (e) { return { client: { width: "100vw", height: "100vh", overflow: "hidden" }, backgroundImg: { height: "100%", width: "100%", zIndex: 1 }, nameForm: { position: "absolute", zIndex: 2 }, error: { position: "absolute", zIndex: 2, border: "10px solid red", width: "100%", height: "100%", animation: "1.5s ease 0s infinite normal none running flash" }, tree: { height: "80vh", position: "fixed", bottom: "5%", left: "-8%", zIndex: 100 } } })), D = function () { var e = z(), t = (0, o.useContext)(a.T), n = (0, o.useState)(""), i = (0, r.Z)(n, 2), d = (i[0], i[1]), f = (0, o.useState)(!0), m = (0, r.Z)(f, 2), p = m[0], g = m[1], b = (0, o.useState)(-1), w = (0, r.Z)(b, 2), S = w[0], j = w[1], N = (0, o.useContext)(c.u).showNoti, W = (0, o.useState)({ id: "", text: "CCVQ CHUA BAT DAU" }), k = (0, r.Z)(W, 2), q = k[0], I = k[1]; return s.W.on("ccvq:changeRound", (function (e) { d(e.roundName) })), (0, T.S)(), (0, o.useEffect)((function () { p && N("default", "Login", (0, h.jsx)(v, { updatePlayerOrder: function (e) { return j(e) }, showForm: p, setShowForm: function () { g((function (e) { return !e })) } })) }), []), (0, o.useEffect)((function () { return s.W.on("ccvq:choosePlayer", (function (e) { I({ id: "", text: "Ph\u1ea7n thi c\u1ee7a th\xed sinh ".concat(t.state.players[e.order - 1].name, " chu\u1ea9n b\u1ecb \u0111\u01b0\u1ee3c b\u1eaft \u0111\u1ea7u") }) })), s.W.on("ccvq:sendQuestion_client", (function (e) { I({ id: "C\xe2u h\u1ecfi s\u1ed1 " + e.id, text: e.question }) })), function () { s.W.off("ccvq:sendQuestion_client"), s.W.off("KD:ready") } }), []), (0, h.jsxs)("div", { className: e.client, children: [(0, h.jsx)("img", { alt: "background", src: l, className: e.backgroundImg }), (0, h.jsx)("img", { alt: "tree", src: u, className: e.tree }), (0, h.jsx)(x, { order: S }), (0, h.jsx)(y, { question: q, playerOrder: S }), (0, h.jsx)(Z, {}), (0, h.jsx)(C, {})] }) } }, 70095: function (e, t, n) { n.d(t, { S: function () { return a } }); var r = n(47313), o = n(25532), i = n(3201), a = function () { var e = (0, r.useContext)(o.T), t = e.state, n = e.action; (0, r.useEffect)((function () { return i.W.on("server:connectedData", (function (e) { n.setConnections(e.users, e.viewer), e.scores.forEach((function (e) { n.setPlayerName(e.order, e.name) })), n.addLog("INFO", e.info.role, "".concat(e.info.name, " v\u1eeba k\u1ebft n\u1ed1i")), "/controller" === document.location.pathname && i.W.emit("controller:talk", { receivers: ["mc", "client", "viewer", "livestream", "scoreboard"], eventName: "ccvq:updateScore", data: { players: t.players } }) })), i.W.on("server:disconnectedData", (function (e) { })), i.W.on("ccvq:controllerReset", (function (e) { "success" === e.status && window.location.reload() })), function () { i.W.off("server:connectedData"), i.W.off("server:disconnectedData"), i.W.off("ccvq:controllerReset") } }), []) } }, 16414: function (e, t, n) { n.d(t, { J: function () { return a }, z: function () { return s } }); var r = n(29439), o = n(47313), i = n(3201), a = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { step: 100 }, t = e.step, n = (0, o.useState)(0), a = (0, r.Z)(n, 2), s = a[0], c = a[1], l = (0, o.useState)(!0), u = (0, r.Z)(l, 2), d = u[0], f = u[1], m = (0, o.useState)(0), p = (0, r.Z)(m, 2), h = p[0], v = p[1], g = (0, o.useState)(0), x = (0, r.Z)(g, 2), b = x[0], w = x[1], S = (0, o.useState)((new Date).getTime()), y = (0, r.Z)(S, 2), j = y[0], N = y[1]; return (0, o.useEffect)((function () { return i.W.on("ccvq:setTime", (function (e) { v(1e3 * e.seconds), c(1e3 * e.seconds), w(1e3 * e.seconds) })), i.W.on("ccvq:timeState", (function (e) { "pause" !== e.status && "timeout" !== e.status || f(!0), "start" === e.status && (f(!1), N((new Date).getTime())) })), function () { i.W.off("ccvq:setTime"), i.W.off("ccvq:timeState") } }), []), (0, o.useEffect)((function () { if (!d) { var e = setTimeout((function () { h > 0 ? v(h - t) : clearTimeout(e) }), t); return function () { clearTimeout(e) } } }), [d, h]), (0, o.useEffect)((function () { if (Date.now() - j <= s && s !== h) { var e = Date.now() - j; w(s - e) } }), [h]), { timer: b, pause: d, time: s } }, s = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { step: 100, isTimer: !1 }, t = e.step, n = e.isTimer, a = (0, o.useState)(null), s = (0, r.Z)(a, 2), c = s[0], l = s[1], u = (0, o.useState)(0), d = (0, r.Z)(u, 2), f = d[0], m = d[1], p = (0, o.useState)(!0), h = (0, r.Z)(p, 2), v = h[0], g = h[1], x = (0, o.useState)(0), b = (0, r.Z)(x, 2), w = b[0], S = b[1], y = (0, o.useState)(new Date), j = (0, r.Z)(y, 2), N = j[0], W = j[1], Z = function () { S(0), m(c), W((new Date).getTime() - 0), n && i.W.emit("controller:talk", { receivers: ["viewer", "livestream", "mc", "client"], eventName: "ccvq:timeState", data: { status: "reset" } }) }, k = function (e) { if (e) return g(!0), l(1e3 * e), S(0), W((new Date).getTime() - 0), g(!1), void (n && i.W.emit("controller:talk", { receivers: ["viewer", "livestream", "mc", "client"], eventName: "ccvq:timeState", data: { status: "start" } })); c && c > 0 && (g(!0), W((new Date).getTime() - w), g(!1)) }, q = function () { n && i.W.emit("controller:talk", { receivers: ["viewer", "livestream", "mc", "client"], eventName: "ccvq:timeState", data: { status: "pause" } }), g(!0) }; return (0, o.useEffect)((function () { c > 0 && m(c) }), [c]), (0, o.useEffect)((function () { if (!v) { var e = setInterval((function () { f > 0 ? m(f - t) : g(!0) }), t); return function () { clearInterval(e) } } }), [v, f]), (0, o.useEffect)((function () { if (Date.now() - N <= c && c !== f) { var e = Date.now() - N; Math.round(e / c * 100) >= 99 && g(!0), S(e) } }), [f]), { duration: c, setDuration: l, timer: w, isPause: v, handleReset: Z, handleOnPause: q, handleOnStart: k } } }, 18477: function (e, t, n) { n.d(t, { _J: function () { return i }, hK: function () { return o }, zT: function () { return a } }); var r = n(3201); var o = function (e) { for (var t = "" + parseInt(e / 60), n = "" + Math.round(e % 60); t.length < 2;)t = "0" + t; for (; n.length < 2;)n = "0" + n; return t + ":" + n }, i = function (e, t, n) { r.W.emit("controller:talk", { receivers: e, eventName: t, data: n }) }, a = function (e, t) { r.W.emit("controller:talk", { receivers: ["controller", "viewer", "livestream", "mc", "client"], eventName: e, data: t }) } } }]);